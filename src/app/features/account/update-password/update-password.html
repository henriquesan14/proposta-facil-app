<nz-card nzTitle="Alterar Senha" nzBordered class="max-w-md mx-auto mt-8">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" nz-form nzLayout="vertical">
    
    <!-- SENHA ATUAL -->
    <nz-form-item>
      <nz-form-label nzFor="currentPassword" nzRequired>Senha atual</nz-form-label>
      <nz-form-control nzErrorTip="Informe sua senha atual.">
        <nz-input-group [nzSuffix]="suffixCurrent">
          <input
            autocomplete="current-password"
            nz-input
            [type]="showCurrent ? 'text' : 'password'"
            id="currentPassword"
            formControlName="currentPassword"
            placeholder="Digite sua senha atual"
          />
        </nz-input-group>
        <ng-template #suffixCurrent>
          <i
            nz-icon
            [nzType]="showCurrent ? 'eye-invisible' : 'eye'"
            class="cursor-pointer"
            (click)="showCurrent = !showCurrent"
          ></i>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <!-- NOVA SENHA -->
    <nz-form-item>
      <nz-form-label nzFor="password" nzRequired>Nova senha</nz-form-label>
      <nz-form-control
        [nzErrorTip]="
          form.get('password')?.hasError('required') ? 'A senha é obrigatória.' :
          form.get('password')?.hasError('minlength') ? 'A senha deve ter no mínimo 8 caracteres.' :
          form.get('password')?.hasError('pattern') ? 'A senha deve conter letras maiúsculas, minúsculas, números e caracteres especiais.' :
          ''
        "
      >
        <nz-input-group [nzSuffix]="suffixNew">
          <input
            autocomplete="new-password"
            nz-input
            [type]="showNew ? 'text' : 'password'"
            id="password"
            formControlName="password"
            placeholder="Digite sua nova senha"
          />
        </nz-input-group>
        <ng-template #suffixNew>
          <i
            nz-icon
            [nzType]="showNew ? 'eye-invisible' : 'eye'"
            class="cursor-pointer"
            (click)="showNew = !showNew"
          ></i>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <!-- CONFIRMAR NOVA SENHA -->
    <nz-form-item>
      <nz-form-label nzFor="confirmPassword" nzRequired>Confirmar nova senha</nz-form-label>
      <nz-form-control nzErrorTip="As senhas não coincidem.">
        <nz-input-group [nzSuffix]="suffixConfirm">
          <input
            autocomplete="new-password"
            nz-input
            [type]="showConfirm ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirme sua nova senha"
          />
        </nz-input-group>
        <ng-template #suffixConfirm>
          <i
            nz-icon
            [nzType]="showConfirm ? 'eye-invisible' : 'eye'"
            class="cursor-pointer"
            (click)="showConfirm = !showConfirm"
          ></i>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

    <div class="mt-4 text-right">
      <button nz-button nzType="primary" [nzLoading]="loading">Salvar</button>
    </div>
  </form>
</nz-card>
